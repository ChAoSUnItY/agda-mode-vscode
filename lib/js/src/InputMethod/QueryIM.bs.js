// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE
'use strict';

var Curry = require("bs-platform/lib/js/curry.js");
var Buffer$AgdaModeVscode = require("./Buffer.bs.js");

function Impl(Editor) {
  var $$Buffer = Buffer$AgdaModeVscode.Impl(Editor);
  var make = function (n) {
    return {
            buffer: Curry._1($$Buffer.make, undefined),
            start: n,
            end_: n
          };
  };
  var update = function (self, input) {
    var penult = input.length - 1 | 0;
    var inputInit = input.substring(0, penult);
    var inputLast = input.substring(penult);
    if (inputInit === Curry._1($$Buffer.toSurface, self.buffer)) {
      var change = {
        offset: penult,
        insertText: inputLast,
        replaceLength: 0
      };
      var match = Curry._3($$Buffer.reflectEditorChange, self.buffer, self.start, change);
      var buffer = match[0];
      self.buffer = buffer;
      if (match[1] !== undefined) {
        
      } else {
        console.log("input: " + (input + ("\ninputInit: " + (inputInit + ("\ninputLast: " + (inputLast + ("\nbuffer: " + Curry._1($$Buffer.toString, self.buffer))))))));
      }
      return Curry._1($$Buffer.toSurface, buffer);
    }
    console.log("input: " + (input + ("\nbuffer" + Curry._1($$Buffer.toString, self.buffer))));
    
  };
  return {
          $$Buffer: $$Buffer,
          make: make,
          update: update
        };
}

exports.Impl = Impl;
/* Buffer-AgdaModeVscode Not a pure module */
