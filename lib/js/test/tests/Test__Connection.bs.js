// Generated by ReScript, PLEASE EDIT WITH CARE
'use strict';

var Vscode = require("vscode");
var $$Promise = require("reason-promise/lib/js/src/js/promise.bs.js");
var Mocha$BsMocha = require("bs-mocha/lib/js/src/Mocha.bs.js");
var Main$AgdaModeVscode = require("../../src/Main.bs.js");
var Connection$AgdaModeVscode = require("../../src/Connection/Connection.bs.js");
var Test__Util$AgdaModeVscode = require("./Test__Util.bs.js");
var Connection__Error$AgdaModeVscode = require("../../src/Connection/Connection__Error.bs.js");

function activateExtension(fileName) {
  var disposables = [];
  var extensionPath = Test__Util$AgdaModeVscode.Path.extensionPath(undefined);
  var globalStoragePath = Test__Util$AgdaModeVscode.Path.globalStoragePath(undefined);
  Main$AgdaModeVscode.activateWithoutContext(disposables, extensionPath, globalStoragePath);
  return Vscode.window.showTextDocument(Vscode.Uri.file(fileName), undefined);
}

Mocha$BsMocha.describe("Connection")(10000, undefined, undefined, (function (param) {
        return Test__Util$AgdaModeVscode.Q.it("should download the language server", (function (param) {
                      var globalStoragePath = Test__Util$AgdaModeVscode.Path.globalStoragePath(undefined);
                      return $$Promise.mapError(Connection$AgdaModeVscode.start(globalStoragePath, true, (function (param) {
                                        
                                      })), (function (e) {
                                    var match = Connection__Error$AgdaModeVscode.toString(e);
                                    return {
                                            RE_EXN_ID: Test__Util$AgdaModeVscode.Exn,
                                            _1: match[0] + "\n" + match[1]
                                          };
                                  }));
                    }));
      }));

exports.activateExtension = activateExtension;
/*  Not a pure module */
