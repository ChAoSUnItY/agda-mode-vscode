// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE
'use strict';

var Task$AgdaModeVscode = require("./Task.bs.js");
var Caml_chrome_debugger = require("bs-platform/lib/js/caml_chrome_debugger.js");
var Parser$AgdaModeVscode = require("../Parser.bs.js");
var Connection$AgdaModeVscode = require("../Connection.bs.js");

function Impl(Editor) {
  var Task = Task$AgdaModeVscode.Impl(Editor);
  var handle = function (error) {
    if (typeof error === "number") {
      if (error === /* Cancelled */0) {
        return /* :: */Caml_chrome_debugger.simpleVariant("::", [
                  /* ViewReq */Caml_chrome_debugger.variant("ViewReq", 3, [/* Plain */Caml_chrome_debugger.simpleVariant("Plain", [
                          /* Error */Caml_chrome_debugger.variant("Error", 3, ["Query Cancelled"]),
                          undefined
                        ])]),
                  /* [] */0
                ]);
      } else {
        return /* :: */Caml_chrome_debugger.simpleVariant("::", [
                  /* ViewReq */Caml_chrome_debugger.variant("ViewReq", 3, [/* Plain */Caml_chrome_debugger.simpleVariant("Plain", [
                          /* Error */Caml_chrome_debugger.variant("Error", 3, ["Out of goal"]),
                          "Please place the cursor in a goal"
                        ])]),
                  /* [] */0
                ]);
      }
    }
    if (error.tag) {
      var body = Parser$AgdaModeVscode.$$Error.toString(error[0]);
      return /* :: */Caml_chrome_debugger.simpleVariant("::", [
                /* ViewReq */Caml_chrome_debugger.variant("ViewReq", 3, [/* Plain */Caml_chrome_debugger.simpleVariant("Plain", [
                        /* Error */Caml_chrome_debugger.variant("Error", 3, ["Internal Parse Error"]),
                        body
                      ])]),
                /* [] */0
              ]);
    }
    var match = Connection$AgdaModeVscode.$$Error.toString(error[0]);
    return /* :: */Caml_chrome_debugger.simpleVariant("::", [
              /* ViewReq */Caml_chrome_debugger.variant("ViewReq", 3, [/* Plain */Caml_chrome_debugger.simpleVariant("Plain", [
                      /* Error */Caml_chrome_debugger.variant("Error", 3, ["Connection Error: " + match[0]]),
                      match[1]
                    ])]),
              /* [] */0
            ]);
  };
  return {
          Task: Task,
          handle: handle
        };
}

exports.Impl = Impl;
/* Task-AgdaModeVscode Not a pure module */
